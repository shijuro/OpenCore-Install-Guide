(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{554:function(t,e,_){t.exports=_.p+"assets/img/replace.6929333c.png"},555:function(t,e,_){t.exports=_.p+"assets/img/debug.4f3d7c16.png"},650:function(t,e,_){"use strict";_.r(e);var v=_(25),l=Object(v.a)({},(function(){var t=this,e=t.$createElement,v=t._self._c||e;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"отладка-opencore"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#отладка-opencore"}},[t._v("#")]),t._v(" Отладка OpenCore")]),t._v(" "),v("ul",[v("li",[t._v("Поддерживаемая версия: 0.6.5")])]),t._v(" "),v("p",[t._v("Вам нужно выяснить, почему у вас возникают проблемы или зависания? Что ж, вы пришли по нужному адресу:")]),t._v(" "),v("ul",[v("li",[v("a",{attrs:{href:"#%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F-%D1%84%D0%B0%D0%B8%D0%BB%D0%BE%D0%B2"}},[t._v("Изменения файлов")])]),t._v(" "),v("li",[v("a",{attrs:{href:"#%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B2-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%BE%D0%BC-%D1%84%D0%B0%D0%B8%D0%BB%D0%B5"}},[t._v("Изменения в конфигурационном файле")])]),t._v(" "),v("li",[v("a",{attrs:{href:"#%D0%BE%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2%D1%81%D0%B5%D0%B3%D0%BE-%D0%BB%D0%BE%D0%B3%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F"}},[t._v("Отключение всего логирования")])])]),t._v(" "),v("h2",{attrs:{id:"изменения-фаилов"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#изменения-фаилов"}},[t._v("#")]),t._v(" Изменения файлов")]),t._v(" "),v("p",[t._v("Для начала убедитесь, что вы используете либо "),v("code",[t._v("DEBUG")]),t._v(", либо "),v("code",[t._v("NOOPT")]),t._v(" версии OpenCore. Это предоставит больше информации, чем "),v("code",[t._v("RELEASE")]),t._v(" версия. Конкретные файлы, которые нужно поменять:")]),t._v(" "),v("ul",[v("li",[t._v("EFI/BOOT/\n"),v("ul",[v("li",[v("code",[t._v("BOOTx64.efi")])])])]),t._v(" "),v("li",[t._v("EFI/OC/Bootstrap/\n"),v("ul",[v("li",[v("code",[t._v("Bootstrap.efi")])])])]),t._v(" "),v("li",[t._v("EFI/OC/Drivers/\n"),v("ul",[v("li",[v("code",[t._v("OpenRuntime.efi")])]),t._v(" "),v("li",[v("code",[t._v("OpenCanopy.efi")]),t._v("(если вы используете это)")])])]),t._v(" "),v("li",[t._v("EFI/OC/\n"),v("ul",[v("li",[v("code",[t._v("OpenCore.efi")])])])])]),t._v(" "),v("p",[v("img",{attrs:{src:_(554),alt:""}})]),t._v(" "),v("ul",[v("li",[v("strong",[t._v("Примечание")]),t._v(": Как правило, лучше всего отлаживать системы без OpenCanopy, если он требуется, убедитесь, что этот файл взят из DEBUG версии, в противном случае отладочной информации практически не будет.")])]),t._v(" "),v("h2",{attrs:{id:"изменения-в-конфигурационном-фаиле"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#изменения-в-конфигурационном-фаиле"}},[t._v("#")]),t._v(" Изменения в конфигурационном файле")]),t._v(" "),v("p",[t._v("Затем, перейдите к своему config.plist и найдите раздел "),v("code",[t._v("Misc")]),t._v(", у нас есть пара записей, с которыми мы хотим поиграть здесь:")]),t._v(" "),v("h3",{attrs:{id:"misc"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#misc"}},[t._v("#")]),t._v(" Misc")]),t._v(" "),v("p",[t._v("Здесь мы хотим включить следующее:")]),t._v(" "),v("ul",[v("li",[v("p",[v("strong",[t._v("AppleDebug")]),t._v(": YES")]),t._v(" "),v("ul",[v("li",[t._v("Предоставляет гораздо больше отладочной информации, относящейся к boot.efi, а также сохраняет логи на диск.")])])]),t._v(" "),v("li",[v("p",[v("strong",[t._v("ApplePanic")]),t._v(": YES")]),t._v(" "),v("ul",[v("li",[t._v("Позволяет хранится логам паники ядра на диске, настоятельно рекомендуется оставить "),v("code",[t._v("keepsyms=1")]),t._v(" в boot-args, чтобы сохранить как можно больше информации.")])])]),t._v(" "),v("li",[v("p",[v("strong",[t._v("DisableWatchdog")]),t._v(": YES")]),t._v(" "),v("ul",[v("li",[t._v("Отключает сторожевой таймер (англ. watchdog) UEFI, используемый когда OpenCore останавливается на чем-то некритичном.")])])]),t._v(" "),v("li",[v("p",[v("strong",[t._v("Target")]),t._v(": "),v("code",[t._v("67")]),t._v("(или рассчитайте значение ниже)")]),t._v(" "),v("ul",[v("li",[t._v("Используется для включения различных уровней отладки")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"left"}},[t._v("Значение")]),t._v(" "),v("th",{staticStyle:{"text-align":"left"}},[t._v("Комментарий")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"left"}},[v("code",[t._v("0x01")])]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("Включает логирование")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"left"}},[v("code",[t._v("0x02")])]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("Включает вывод отладки на экран")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"left"}},[v("code",[t._v("0x04")])]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("Включает логирование в Data Hub.")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"left"}},[v("code",[t._v("0x08")])]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("Включает логирование последовательных портов.")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"left"}},[v("code",[t._v("0x10")])]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("Включает логирование переменных UEFI.")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"left"}},[v("code",[t._v("0x20")])]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("Включает логирование энергонезависимых переменных UEFI.")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"left"}},[v("code",[t._v("0x40")])]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("Включает логирование в файл.")])])])]),t._v(" "),v("p",[t._v("Для вычисления значения Target, мы можем использовать HEX калькулятор, а затем конвертировать в десятичное значение. Для нас, мы хотим чтобы наши значения хранились в .txt файле для последующего просмотра:")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("0x01")]),t._v(" — Включает логирование")]),t._v(" "),v("li",[v("code",[t._v("0x02")]),t._v(" — Включает вывод отладки на экран\n"),v("ul",[v("li",[t._v("Обратите внимание, что это может сильно увеличить время загрузки на прошивках с плохой имплементацией GOP")])])]),t._v(" "),v("li",[v("code",[t._v("0x10")]),t._v(" — Включает логирование переменных UEFI.")]),t._v(" "),v("li",[v("code",[t._v("0x40")]),t._v(" — Включает логирование в файл.")])]),t._v(" "),v("p",[v("code",[t._v("0x01")]),t._v(" + "),v("code",[t._v("0x02")]),t._v(" + "),v("code",[t._v("0x10")]),t._v(" + "),v("code",[t._v("0x40")]),t._v(" = "),v("code",[t._v("0x53")])]),t._v(" "),v("p",[v("code",[t._v("0x53")]),t._v(" конвертацией в десятичное значение становится "),v("code",[t._v("83")])]),t._v(" "),v("p",[t._v("Итак, мы можем установить "),v("code",[t._v("Misc")]),t._v(" -> "),v("code",[t._v("Debug")]),t._v(" -> "),v("code",[t._v("Target")]),t._v(" -> "),v("code",[t._v("83")])]),t._v(" "),v("ul",[v("li",[v("strong",[t._v("DisplayLevel")]),t._v(": "),v("code",[t._v("2147483714")]),t._v("(или рассчитайте значение ниже)\n"),v("ul",[v("li",[t._v("Используется для настройки того, что логируется")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"left"}},[t._v("Значение")]),t._v(" "),v("th",{staticStyle:{"text-align":"left"}},[t._v("Комментарий")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"left"}},[v("code",[t._v("0x00000002")])]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("DEBUG_WARN в DEBUG, NOOPT, RELEASE.")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"left"}},[v("code",[t._v("0x00000040")])]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("DEBUG_INFO в DEBUG, NOOPT.")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"left"}},[v("code",[t._v("0x00400000")])]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("DEBUG_VERBOSE в Custom Builds.")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"left"}},[v("code",[t._v("0x80000000")])]),t._v(" "),v("td",{staticStyle:{"text-align":"left"}},[t._v("DEBUG_ERROR в DEBUG, NOOPT, RELEASE.")])])])]),t._v(" "),v("p",[t._v("Полный список можно найти в "),v("a",{attrs:{href:"https://github.com/tianocore/edk2/blob/UDK2018/MdePkg/Include/Library/DebugLib.h",target:"_blank",rel:"noopener noreferrer"}},[t._v("DebugLib.h"),v("OutboundLink")],1),t._v(".")]),t._v(" "),v("p",[t._v("Нам просто нужно следующее:")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("0x00000002")]),t._v(" — DEBUG_WARN в DEBUG, NOOPT, RELEASE.")]),t._v(" "),v("li",[v("code",[t._v("0x00000040")]),t._v(" — DEBUG_INFO в DEBUG, NOOPT.")]),t._v(" "),v("li",[v("code",[t._v("0x80000000")]),t._v(" — DEBUG_ERROR в DEBUG, NOOPT, RELEASE.")])]),t._v(" "),v("p",[t._v("Как и с "),v("code",[t._v("Target")]),t._v(", мы используем HEX калькулятор, а затем конвертируем в десятичное значение:")]),t._v(" "),v("p",[v("code",[t._v("0x80000042")]),t._v(" конвертированное в десятичное "),v("code",[t._v("Misc")]),t._v(" -> "),v("code",[t._v("Debug")]),t._v(" -> "),v("code",[t._v("DisplayLevel")]),t._v(" -> "),v("code",[t._v("2147483714")])]),t._v(" "),v("p",[t._v("После этого, ваш config.plist должен выглядеть так:")]),t._v(" "),v("p",[v("img",{attrs:{src:_(555),alt:""}})]),t._v(" "),v("h2",{attrs:{id:"отключение-всего-логирования"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#отключение-всего-логирования"}},[t._v("#")]),t._v(" Отключение всего логирования")]),t._v(" "),v("p",[t._v("Чтобы убрать всё логирование в файлы, и отладочные сообщения, просто замените все файлы на те, которые находится в RELEASE версии, как мы делали до этого в разделе "),v("a",{attrs:{href:"#file-swap"}},[t._v("File Swap")])]),t._v(" "),v("p",[t._v("А для того, чтобы убрать запись на диск, установите следующее:")]),t._v(" "),v("ul",[v("li",[t._v("AppleDebug = "),v("code",[t._v("NO")])]),t._v(" "),v("li",[t._v("ApplePanic = "),v("code",[t._v("NO")])]),t._v(" "),v("li",[t._v("Target = "),v("code",[t._v("0")])])])])}),[],!1,null,null,null);e.default=l.exports}}]);